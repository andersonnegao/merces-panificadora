<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MercÃªs Panificadora</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f0c07;
      --card: rgba(255,255,255,0.04);
      --text: #f8f5ed;
      --muted: #c9c3b5;
      --accent: #f4c56d;
      --accent-strong: #f08b2d;
      --danger: #ff6b6b;
      --success: #39d98a;
      --shadow: 0 18px 45px rgba(0,0,0,0.35);
      --radius: 18px;
    }
    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      background: radial-gradient(circle at 12% 20%, rgba(244,197,109,0.15), transparent 26%),
                  radial-gradient(circle at 82% 4%, rgba(255,139,45,0.12), transparent 24%),
                  var(--bg);
      color: var(--text);
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      min-height: 100vh;
    }
    a { color: inherit; text-decoration: none; }
    img { max-width: 100%; display: block; }
    button, input, select, textarea { font: inherit; }

    header {
      position: sticky;
      top: 0; z-index: 10;
      backdrop-filter: blur(18px);
      background: rgba(15,12,7,0.82);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .topbar {
      max-width: 1200px; margin: 0 auto;
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 18px;
      gap: 12px;
    }
    .brand {
      display: flex; align-items: center; gap: 10px;
      font-weight: 800;
      letter-spacing: 0.04em;
    }
    .brand-mark {
      width: 38px; height: 38px; border-radius: 12px;
      background: linear-gradient(135deg, #f9d37f, #f08b2d);
      display: grid; place-items: center;
      color: #1a0f04; font-weight: 900;
      box-shadow: 0 10px 24px rgba(240,139,45,0.28);
    }
    nav { display: none; align-items: center; gap: 16px; font-size: 14px; color: var(--muted); }
    nav a { padding: 8px 10px; border-radius: 12px; transition: .2s ease; }
    nav a:hover { color: var(--text); background: rgba(255,255,255,0.06); }
    @media (min-width: 720px) { nav { display: flex; } }

    .cart-button {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 10px 14px;
      background: linear-gradient(135deg, #f9d37f, #f08b2d);
      color: #1c0f05;
      border-radius: 14px;
      font-weight: 800;
      border: none; cursor: pointer;
      box-shadow: 0 12px 28px rgba(240,139,45,0.35);
      transition: transform .15s ease;
    }
    .cart-button:active { transform: translateY(1px) scale(.99); }
    .badge { min-width: 22px; height: 22px; border-radius: 50%; background: #1c0f05; color: #f9d37f; display: grid; place-items: center; font-size: 12px; font-weight: 800; }

    .cart-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px);
      display: none; align-items: flex-end; justify-content: center; padding: 16px; z-index: 30;
    }
    .cart-overlay.open { display: flex; }
    .cart-drawer {
      width: min(480px, 100%); max-height: 88vh;
      background: rgba(18,14,9,0.94);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 18px 18px 12px 12px;
      box-shadow: 0 22px 44px rgba(0,0,0,0.45);
      padding: 16px;
      display: grid; gap: 12px;
      overflow: hidden;
      animation: slideUp .22s ease;
    }
    @keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .drawer-head { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
    .drawer-body { overflow: auto; max-height: 50vh; padding-right: 4px; }
    .drawer-actions { display: flex; justify-content: space-between; gap: 8px; flex-wrap: wrap; align-items: center; }
    .drawer-close { border: none; background: rgba(255,255,255,0.08); color: var(--text); padding: 8px 10px; border-radius: 10px; cursor: pointer; }

    main { max-width: 1200px; margin: 0 auto; padding: 18px; }
    section { padding: 26px 0; }
    h2.section-title { margin: 0 0 14px; font-size: 24px; letter-spacing: -0.02em; }
    .section-sub { color: var(--muted); margin-bottom: 14px; }

    .hero {
      display: grid; gap: 18px; align-items: center;
      background: linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 22px;
      padding: 22px;
      box-shadow: var(--shadow);
    }
    .hero-title { font-size: clamp(28px, 6vw, 40px); line-height: 1.05; margin: 6px 0 10px; font-weight: 800; }
    .hero-highlight { color: var(--accent); }
    .hero-text { color: var(--muted); line-height: 1.6; margin-bottom: 16px; }
    .hero-actions { display: flex; flex-wrap: wrap; gap: 12px; }
    .btn {
      border: none; cursor: pointer; font-weight: 700; padding: 12px 16px; border-radius: 14px; transition: .2s ease; display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-primary { background: linear-gradient(135deg, #f9d37f, #f08b2d); color: #1b0f05; box-shadow: 0 14px 30px rgba(240,139,45,0.32); }
    .btn-secondary { background: rgba(255,255,255,0.06); color: var(--text); border: 1px solid rgba(255,255,255,0.08); }
    .btn:active { transform: translateY(1px) scale(.99); }

    .product-grid { display: grid; gap: 14px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
    .card {
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.07);
      border-radius: var(--radius);
      padding: 14px;
      box-shadow: var(--shadow);
    }
    .product-img { height: 150px; border-radius: 14px; background: linear-gradient(135deg, rgba(249,211,127,0.18), rgba(240,139,45,0.18)); display: grid; place-items: center; margin-bottom: 12px; position: relative; overflow: hidden; }
    .product-img::after { content:"MercÃªs"; position: absolute; inset: 0; display: grid; place-items: center; font-family: 'Playfair Display', serif; font-size: 32px; letter-spacing: 0.12em; color: rgba(26,15,7,0.14); font-weight: 700; }
    .pill { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.4); color: #f9d37f; padding: 6px 10px; border-radius: 999px; font-size: 12px; font-weight: 700; letter-spacing: 0.04em; }
    .product-header { display: flex; justify-content: space-between; gap: 8px; align-items: center; }
    .product-name { font-weight: 800; font-size: 17px; }
    .product-price { color: var(--accent); font-weight: 800; }
    .muted { color: var(--muted); font-size: 14px; line-height: 1.5; margin: 6px 0; }
    .stock { font-size: 13px; color: #92f7be; }
    .card-actions { display: flex; gap: 8px; align-items: center; margin-top: 10px; }
    .qty-input { width: 64px; padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.05); color: var(--text); }

    .panel { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06); border-radius: 20px; padding: 16px; box-shadow: var(--shadow); }
    .cart-empty { color: var(--muted); padding: 14px; text-align: center; }
    .cart-item { display: grid; grid-template-columns: 1fr auto; gap: 8px; padding: 12px; border-radius: 14px; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.04); margin-bottom: 10px; }
    .cart-item strong { display: block; font-size: 15px; }
    .cart-meta { color: var(--muted); font-size: 13px; }
    .cart-controls { display: flex; align-items: center; gap: 8px; }
    .cart-controls button { padding: 8px 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.05); color: var(--text); cursor: pointer; }
    .cart-controls button.danger { border-color: rgba(255,107,107,0.28); color: #ffaeae; }
    .cart-footer { display: flex; flex-wrap: wrap; gap: 10px; justify-content: space-between; align-items: center; margin-top: 10px; }
    .total { font-weight: 800; font-size: 18px; }

    form { display: grid; gap: 12px; }
    .form-grid { display: grid; gap: 10px; grid-template-columns: 1fr; }
    @media(min-width: 720px) { .form-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    label { display: grid; gap: 6px; font-weight: 600; color: var(--text); }
    input, select, textarea {
      width: 100%; padding: 12px 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04); color: var(--text);
    }
    textarea { min-height: 90px; resize: vertical; }

    .status { padding: 12px 14px; border-radius: 12px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.08); display: none; }
    .status.ok { display: block; border-color: rgba(57,217,138,0.34); color: #b5ffd8; }
    .status.err { display: block; border-color: rgba(255,107,107,0.34); color: #ffc2c2; }
    .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%) translateY(20px); background: rgba(0,0,0,0.8); color: #fff; padding: 12px 16px; border-radius: 12px; opacity: 0; pointer-events: none; transition: .25s ease; box-shadow: 0 12px 26px rgba(0,0,0,0.4); z-index: 20; }
    .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
  </style>
</head>
<body>
  <header>
    <div class="topbar">
      <div class="brand">
        <div class="brand-mark">MP</div>
        <div>
          <div style="font-size:15px;">MercÃªs Panificadora</div>
          <small style="color:var(--muted);">Padaria &amp; confeitaria premium</small>
        </div>
      </div>
      <nav>
        <a href="#home" class="nav-link">Home</a>
        <a href="#produtos" class="nav-link">Produtos</a>
        <a href="#carrinho" class="nav-link">Carrinho</a>
        <a href="#pedido" class="nav-link">Pedido</a>
      </nav>
      <button class="cart-button" id="goCart">
        ðŸ›’ Carrinho
        <span class="badge" id="cartBadge">0</span>
      </button>
    </div>
  </header>

  <main>
    <section id="home" class="hero">
      <div>
        <div class="pill" style="position:static; width:fit-content;">Desde 1998</div>
        <h1 class="hero-title">Sabor de tradiÃ§Ã£o com <span class="hero-highlight">acabamento premium</span>.</h1>
        <p class="hero-text">ExperiÃªncia artesanal em pÃ£es, doces e salgados com logÃ­stica para eventos e empresas. PeÃ§a online, acompanhe o carrinho e combine entrega com nossa equipe.</p>
        <div class="hero-actions">
          <button class="btn btn-primary" data-go="#produtos">Ver cardÃ¡pio</button>
          <button class="btn btn-secondary" data-go="#pedido">Fazer pedido</button>
        </div>
      </div>
      <div class="card" style="text-align:center; display:grid; place-items:center; gap:12px;">
        <div style="font-family:'Playfair Display',serif; font-size:30px; color:var(--accent);">Luxury Bake</div>
        <div style="color:var(--muted); max-width:280px; line-height:1.6;">ProduÃ§Ã£o diÃ¡ria, ingredientes selecionados e atendimento dedicado para seu evento ou vitrine.</div>
      </div>
    </section>

    <section id="produtos">
      <h2 class="section-title">Produtos</h2>
      <p class="section-sub">SeleÃ§Ã£o curada com opÃ§Ãµes assadas e congeladas para sua rotina e eventos.</p>
      <div class="product-grid" id="productGrid"></div>
    </section>

    <section id="carrinho">
      <h2 class="section-title">Carrinho</h2>
      <p class="section-sub">Use o botÃ£o do topo para abrir o carrinho e acompanhar seus itens.</p>
      <div class="panel" style="text-align:center; color:var(--muted);">
        O carrinho abre como um painel lateral para vocÃª ajustar quantidades e finalizar com conforto.
      </div>
    </section>

    <section id="pedido">
      <h2 class="section-title">Fazer Pedido</h2>
      <p class="section-sub">Preencha os dados e enviaremos seu pedido completo para nossa equipe.</p>
      <form id="orderForm" class="panel">
        <div class="form-grid">
          <label>Nome / Empresa
            <input type="text" name="nome" required placeholder="Ex: Ana - CafÃ© do Centro" />
          </label>
          <label>WhatsApp
            <input type="tel" name="whatsapp" required placeholder="(41) 99999-0000" />
          </label>
          <label>Cidade
            <input type="text" name="cidade" required placeholder="Curitiba" />
          </label>
          <label>EndereÃ§o completo
            <input type="text" name="endereco" required placeholder="Rua, nÃºmero, bairro, referÃªncia" />
          </label>
          <label>Tipo (Assado/Congelado)
            <select name="tipo" required>
              <option value="Assado">Assado</option>
              <option value="Congelado">Congelado</option>
            </select>
          </label>
          <label>Data da entrega
            <input type="date" name="dataEntrega" required />
          </label>
          <label>Hora da entrega
            <input type="time" name="horaEntrega" required />
          </label>
          <label>Pagamento
            <select name="pagamento" required>
              <option value="CartÃ£o">CartÃ£o</option>
              <option value="Pix">Pix</option>
              <option value="Dinheiro">Dinheiro</option>
              <option value="Faturar">Faturar</option>
            </select>
          </label>
          <label>Frete (opcional)
            <input type="text" name="frete" placeholder="Ex: a combinar" />
          </label>
          <label>ObservaÃ§Ã£o
            <textarea name="observacao" placeholder="Ponto de referÃªncia, alergias, instruÃ§Ãµes"></textarea>
          </label>
        </div>
        <button type="submit" class="btn btn-primary" style="width:fit-content;">Enviar pedido completo</button>
        <div class="status" id="statusBox"></div>
      </form>
    </section>
  </main>

  <div class="cart-overlay" id="cartOverlay">
    <div class="cart-drawer" role="dialog" aria-label="Carrinho de compras">
      <div class="drawer-head">
        <div>
          <div style="font-weight:800;">Seu carrinho</div>
          <small style="color:var(--muted);">Revise antes de enviar o pedido</small>
        </div>
        <button class="drawer-close" id="btnCloseCart">âœ•</button>
      </div>
      <div class="drawer-body" id="cartList"></div>
      <div class="drawer-actions">
        <div class="total" id="cartTotal">Total: R$ 0,00</div>
        <div style="display:flex; gap:8px;">
          <button class="btn btn-secondary" id="btnClear">Limpar carrinho</button>
          <button class="btn btn-primary" data-go="#pedido" id="btnCheckout">Fazer pedido</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">Adicionado ao carrinho</div>

  <script>
    const productGrid = document.getElementById('productGrid');
    const cartList = document.getElementById('cartList');
    const cartTotal = document.getElementById('cartTotal');
    const cartBadge = document.getElementById('cartBadge');
    const cartOverlay = document.getElementById('cartOverlay');
    const btnCloseCart = document.getElementById('btnCloseCart');
    const statusBox = document.getElementById('statusBox');
    const toast = document.getElementById('toast');
    const STORAGE_KEY = 'mp-cart';
    const cart = [];

    const products = [
      { categoria:'PÃ£es Especiais', nome:'PÃ£o de Levain', ingredientes:'FermentaÃ§Ã£o natural, farinha francesa, crosta crocante', preco: 18.9, estoque: 30 },
      { categoria:'Salgados Gourmet', nome:'Croissant Presunto & Brie', ingredientes:'Manteiga premium, presunto royal, queijo brie cremoso', preco: 14.5, estoque: 40 },
      { categoria:'Doces', nome:'Bolo Red Velvet', ingredientes:'Cacau importado, cream cheese artesanal', preco: 79.9, estoque: 12 },
      { categoria:'Cafeteria', nome:'Focaccia do Chef', ingredientes:'Azeite italiano, sal de parma, ervas frescas', preco: 24.0, estoque: 18 },
      { categoria:'Congelados', nome:'PÃ£o de Queijo Mineiro', ingredientes:'Queijo canastra, polvilho artesanal', preco: 42.0, estoque: 50 },
      { categoria:'Eventos', nome:'Mini SanduÃ­ches Box', ingredientes:'Mix de pÃ£es, frios nobres, maionese da casa', preco: 129.0, estoque: 10 }
    ];

    const formatMoney = (v) => v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

    const persistCart = () => {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(cart));
    };

    const restoreCart = () => {
      try {
        const stored = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
        if (Array.isArray(stored)) {
          cart.length = 0;
          stored.forEach(item => cart.push(item));
        }
      } catch (err) {
        cart.length = 0;
      }
    };

    const renderProducts = () => {
      productGrid.innerHTML = '';
      products.forEach((p, i) => {
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="product-img"><span class="pill">${p.categoria}</span></div>
          <div class="product-header">
            <div class="product-name">${p.nome}</div>
            <div class="product-price">${formatMoney(p.preco)}</div>
          </div>
          <div class="muted">${p.ingredientes}</div>
          <div class="stock">Estoque: ${p.estoque} unid.</div>
          <div class="card-actions">
            <input type="number" class="qty-input" min="1" value="1" data-idx="${i}" aria-label="Quantidade">
            <button class="btn btn-secondary add-btn" data-idx="${i}">Adicionar</button>
          </div>`;
        productGrid.appendChild(card);
      });
    };

    const showToast = (text) => {
      toast.textContent = text;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 1600);
    };

    const updateBadge = () => {
      const total = cart.reduce((sum, item) => sum + item.qtd, 0);
      cartBadge.textContent = total;
    };

    const renderCart = () => {
      updateBadge();
      if (!cart.length) {
        cartList.innerHTML = '<div class="cart-empty">Carrinho vazio</div>';
        cartTotal.textContent = 'Total: R$ 0,00';
        persistCart();
        return;
      }
      cartList.innerHTML = '';
      let total = 0;
      cart.forEach((item, index) => {
        total += item.preco * item.qtd;
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <div>
            <strong>${item.nome}</strong>
            <div class="cart-meta">${item.categoria} Â· ${item.qtd} un Â· ${formatMoney(item.preco)}</div>
          </div>
          <div class="cart-controls">
            <button data-action="dec" data-index="${index}">-</button>
            <span>${item.qtd}</span>
            <button data-action="inc" data-index="${index}">+</button>
            <button data-action="remove" data-index="${index}" class="danger">remover</button>
          </div>`;
        cartList.appendChild(div);
      });
      cartTotal.textContent = `Total: ${formatMoney(total)}`;
      persistCart();
    };

    const openCart = () => {
      cartOverlay.classList.add('open');
    };

    const closeCart = () => {
      cartOverlay.classList.remove('open');
    };

    const addToCart = (product, qtd) => {
      const exists = cart.find(i => i.nome === product.nome);
      if (exists) {
        exists.qtd += qtd;
      } else {
        cart.push({ ...product, qtd });
      }
      renderCart();
      showToast('Adicionado ao carrinho');
    };

    productGrid.addEventListener('click', (e) => {
      const btn = e.target.closest('.add-btn');
      if (!btn) return;
      const idx = Number(btn.dataset.idx);
      const qtyInput = productGrid.querySelector(`.qty-input[data-idx="${idx}"]`);
      const qtd = Math.max(1, Number(qtyInput?.value) || 1);
      addToCart(products[idx], qtd);
      openCart();
    });

    cartList.addEventListener('click', (e) => {
      const btn = e.target.closest('button[data-action]');
      if (!btn) return;
      const idx = Number(btn.dataset.index);
      const action = btn.dataset.action;
      const item = cart[idx];
      if (!item) return;
      if (action === 'inc') item.qtd += 1;
      if (action === 'dec') item.qtd = Math.max(1, item.qtd - 1);
      if (action === 'remove') cart.splice(idx, 1);
      renderCart();
    });

    document.getElementById('btnClear').addEventListener('click', () => {
      cart.length = 0;
      renderCart();
    });

    document.getElementById('goCart').addEventListener('click', () => {
      openCart();
    });

    btnCloseCart.addEventListener('click', closeCart);

    cartOverlay.addEventListener('click', (e) => {
      if (e.target === cartOverlay) closeCart();
    });

    document.getElementById('btnCheckout').addEventListener('click', () => {
      document.querySelector('#pedido').scrollIntoView({ behavior: 'smooth' });
      closeCart();
    });

    document.querySelectorAll('[data-go]').forEach(btn => btn.addEventListener('click', () => {
      const target = btn.getAttribute('data-go');
      const el = document.querySelector(target);
      if (el) el.scrollIntoView({ behavior: 'smooth' });
    }));

    document.querySelectorAll('.nav-link').forEach(link => link.addEventListener('click', (e) => {
      e.preventDefault();
      const href = link.getAttribute('href');
      if (href === '#carrinho') {
        openCart();
        return;
      }
      const el = document.querySelector(href);
      if (el) el.scrollIntoView({ behavior: 'smooth' });
    }));

    restoreCart();
    renderProducts();
    renderCart();

    const form = document.getElementById('orderForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      statusBox.className = 'status';
      statusBox.style.display = 'block';

      if (!cart.length) {
        statusBox.textContent = 'Adicione pelo menos um item ao carrinho.';
        statusBox.classList.add('err');
        openCart();
        return;
      }

      const payload = {
        cliente: {
          nome: form.nome.value.trim(),
          whatsapp: form.whatsapp.value.trim(),
          cidade: form.cidade.value.trim(),
          endereco: form.endereco.value.trim()
        },
        entrega: {
          tipo: form.tipo.value,
          data: form.dataEntrega.value,
          hora: form.horaEntrega.value,
          frete: form.frete.value.trim()
        },
        pagamento: form.pagamento.value,
        observacao: form.observacao.value.trim(),
        itens: cart.map(i => ({ categoria: i.categoria, nome: i.nome, quantidade: i.qtd, preco: i.preco }))
      };

      statusBox.textContent = 'Enviando pedido...';

      try {
        const response = await fetch('https://script.google.com/macros/s/AKfycbyiWJ8VUDflilFlhHHuXR5rorP2j9JjNuoszqEqPN-sN6BjuiklyUt4_6DRD3e1QyT7/exec', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        if (!response.ok) throw new Error('Erro ao enviar');

        statusBox.textContent = 'Pedido enviado com sucesso!';
        statusBox.classList.add('ok');
        form.reset();
        cart.length = 0;
        renderCart();
        closeCart();
      } catch (error) {
        statusBox.textContent = 'Erro ao enviar pedido. Tente novamente.';
        statusBox.classList.add('err');
      }
    });
  </script>
</body>
</html>
